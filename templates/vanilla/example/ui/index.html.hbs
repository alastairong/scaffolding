<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="Description" content="Put your description here." />
    <base href="/" />

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        background-color: #ededed;
      }
    </style>
    <title>lit-element</title>
  </head>

  <body>
    <div id="content"></div>

    <script type="module">
      import { AppWebsocket } from '@holochain/client';
      
      async function connect() {
        const appWebsocket = await AppWebsocket.connect(
          `ws://localhost:${process.env.HC_PORT}`
        );

        const appInfo = await appWebsocket.appInfo({
          installed_app_id: '{{app_name}}',
        });
        
        const cellData = appInfo.cell_data[0];
        
        const result = await appWebsocket.callZome({
          cap_secret: null,
          cell_id: cellData.cell_id,
          zome_name: 'hello_world',
          fn_name: 'hello_world',
          payload: null,
          provenance: cellData.cell_id[1]
        });
    
        document.getElementById('content').innerHTML = `<span>${result}</span>`
      }
      
      connect();
    </script>
  </body>
</html>
